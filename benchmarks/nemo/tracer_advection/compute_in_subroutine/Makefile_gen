# Makefile for the code generated by PSyclone for the version of the
# tra_adv benchmark that has had the compute moved into a subroutine
# for the purposes of processing with Dusk/Dawn.

# Compiler and associated flags must be set through the following
# environment variables:
#
#   export F90=gfortran
#   export F90FLAGS=-O3
#   export OMPFLAGS=-fopenmp
#   export MPIF90=mpif90

FORT_FLAGS = ${F90FLAGS} ${OMPFLAGS} ${PROF_LIB_INC}

tra_adv.exe: tra_adv_compute.o tra_adv_driver.o
	${F90} ${OMPFLAGS} -o $@ tra_adv_compute.o tra_adv_driver.o ${LDFLAGS}

%.o: %.f90
	${F90} ${FORT_FLAGS} -c $<
%.o: %.F90
	${F90} ${FORT_FLAGS} -c $<

clean:
	rm -f *.o *.mod
	rm -f *~

allclean: clean
	rm -f gnu_opt_report.txt output.dat tra_adv.exe
